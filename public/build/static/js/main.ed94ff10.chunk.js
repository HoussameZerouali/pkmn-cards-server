(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{34:function(e,t,n){},38:function(e,t){},63:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(35),s=n.n(a),i=n(8),o=n(2),d=n(3),l=n(5),u=n(4),h=n(36),p=n.n(h).a.create({baseURL:"https://pkmn-shop.herokuapp.com",withCredentials:!0});function j(e){if(e.response.data)throw console.log(e.response&&e.response.data),e;throw e}var b={service:p,signup:function(e){return p.post("/api/auth/signup",e).then((function(e){return e.data})).catch(j)},signin:function(e){return p.post("/api/auth/signin",e).then((function(e){return e.data})).catch(j)},logout:function(){return p.get("/api/auth/logout").then((function(e){return e.data})).catch(j)},isLoggedIn:function(){return p.get("/api/users/profile").then((function(e){return e.data})).catch(j)},getOneCard:function(e){return p.get("/api/me/cards/"+e).then((function(e){return e.data})).catch(j)},getItems:function(){return p.get("/api/pokemonApi/all").then((function(e){return e.data})).catch(j)},getOneCardFromApi:function(e){return p.get("/api/pokemonApi/".concat(e)).then((function(e){return e.data})).catch(j)},getApiByPage:function(e){return p.get("/api/pokemonApi/all/".concat(e)).then((function(e){return e.data})).catch(j)},filterApiByName:function(e){return p.get("/api/pokemonApi/search/".concat(e)).then((function(e){return e.data})).catch(j)},getAllUserCards:function(){return p.get("/api/me/cards").then((function(e){return e.data})).catch(j)},addCard:function(e){return p.post("/api/me/cards/add",e).then((function(e){return e.data})).catch(j)},updateCard:function(e,t){return p.patch("/api/me/cards/".concat(e,"/edit"),t).then((function(e){return e.data})).catch(j)},getUserCollection:function(e){return p.get("/api/me/collection/".concat(e)).then((function(e){return e.data})).catch(j)},getOneUserCard:function(e){return p.get("/api/me/cards/"+e).then((function(e){return e.data})).catch(j)},createBid:function(e){return p.post("/api/bids/create",e).then((function(e){return e.data})).catch(j)},deleteBid:function(e){return p.delete("/api/bids/".concat(e)).then((function(e){return e.data})).catch(j)},findCardsOnSale:function(){return p.get("/api/bids").then((function(e){return e.data})).catch(j)},findUserAuctions:function(){return p.get("/api/profile/auctions").then((function(e){return e.data})).catch(j)},findBid:function(e){return p.get("/api/bids/".concat(e)).then((function(e){return e.data})).catch(j)},updatedBids:function(e,t){return p.patch("/api/bids/".concat(e),t).then((function(e){return e.data})).catch(j)},getAllUserCardsFromApiCard:function(e){return p.get("/api/me/cards/all/"+e).then((function(e){return e.data})).catch(j)},getCardsOnSale:function(e){return p.get("/api/cards/bids/"+e).then((function(e){return e.data})).catch(j)},getAllCardsOpenForExchange:function(){return p.get("/api/exchanges").then((function(e){return e.data})).catch(j)},getAllCardsOneOfApiIdOpenForExchange:function(e){return p.get("/api/exchanges/"+e).then((function(e){return e.data})).catch(j)}},O=c.a.createContext(),f=n(0),x=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={user:null,isLoggedIn:!1,isLoading:!0},e.setUser=function(t){e.setState({user:t,isLoggedIn:!0})},e.removeUser=function(){e.setState({user:null,isLoggedIn:!1})},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;b.isLoggedIn().then((function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1})})).catch((function(t){e.setState({user:null,isLoggedIn:!1,isLoading:!1})}))}},{key:"render",value:function(){var e={user:this.state.user,setUser:this.setUser,removeUser:this.removeUser,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading};return Object(f.jsx)(O.Provider,{value:e,children:this.props.children})}}]),n}(r.Component),m=n(9),g=n(10),v=function(e){return function(t){return Object(f.jsx)(O.Consumer,{children:function(n){return Object(f.jsx)(e,Object(g.a)(Object(g.a)({},t),{},{context:n}))}})}},k=(n(63),v((function(e){var t=e.context;return Object(f.jsxs)("nav",{className:"NavMain",children:[Object(f.jsx)(i.c,{exact:!0,to:"/",children:Object(f.jsx)("h3",{className:"logo",children:"App name"})}),Object(f.jsxs)("ul",{className:"nav-list",children:[t.isLoggedIn&&Object(f.jsxs)(c.a.Fragment,{children:[Object(f.jsx)("li",{children:Object(f.jsx)(i.c,{to:"/profile/cards",children:"User Cards"})}),Object(f.jsx)("li",{children:Object(f.jsx)(i.c,{to:"/profile/auctions",children:"Auctions"})}),Object(f.jsx)("li",{children:Object(f.jsx)(i.c,{to:"/profile/exchanges",children:"User Exchanges"})}),Object(f.jsx)("li",{children:Object(f.jsx)(i.c,{to:"/profile",children:t.user&&t.user.email})}),Object(f.jsx)("li",{children:Object(f.jsx)("p",{onClick:function(){b.logout().then((function(){t.removeUser()})).catch((function(e){console.log(e)}))},children:"Logout"})})]}),!t.isLoggedIn&&Object(f.jsxs)(c.a.Fragment,{children:[Object(f.jsx)("li",{children:Object(f.jsx)(i.c,{to:"/signin",children:"Log in"})}),Object(f.jsx)("li",{children:Object(f.jsx)(i.c,{to:"/signup",children:"Create account"})})]})]})]})}))),C=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Home"}),Object(f.jsx)("p",{children:Object(f.jsx)(i.b,{to:"/cards",children:"See all cards"})})]})}}]),n}(c.a.Component),y=n(16),S=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={email:"",password:""},e.handleChange=function(t){var n=t.target.name,r=t.target.value;e.setState(Object(y.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault(),b.signin(e.state).then((function(t){e.props.context.setUser(t)})).catch((function(e){console.log(e)}))},e}return Object(d.a)(n,[{key:"render",value:function(){return this.props.context.user?Object(f.jsx)(m.a,{to:"/"}):Object(f.jsxs)("form",{onChange:this.handleChange,onSubmit:this.handleSubmit,children:[Object(f.jsx)("h2",{children:"Signin"}),Object(f.jsx)("label",{htmlFor:"email",children:"Email"}),Object(f.jsx)("input",{type:"email",id:"email",name:"email"}),Object(f.jsx)("label",{htmlFor:"password",children:"Password"}),Object(f.jsx)("input",{type:"password",id:"password",name:"password"}),Object(f.jsx)("button",{children:"Submit"})]})}}]),n}(r.Component),w=Object(m.g)(v(S)),A=function(e){return Object(f.jsx)(w,{})},I=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={email:"",password:"",username:""},e.handleChange=function(t){var n=t.target.value,r=t.target.name;e.setState(Object(y.a)({},r,n))},e.handleSubmit=function(t){t.preventDefault(),b.signup(e.state).then((function(){e.props.history.push("/signin")})).catch((function(e){console.log(e)}))},e}return Object(d.a)(n,[{key:"render",value:function(){return this.props.context.user?Object(f.jsx)(m.a,{to:"/"}):Object(f.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(f.jsx)("h2",{children:"Signup"}),Object(f.jsx)("label",{htmlFor:"username",children:"Username"}),Object(f.jsx)("input",{onChange:this.handleChange,value:this.state.username,type:"username",id:"username",name:"username"}),Object(f.jsx)("label",{htmlFor:"email",children:"Email"}),Object(f.jsx)("input",{onChange:this.handleChange,value:this.state.email,type:"email",id:"email",name:"email"}),Object(f.jsx)("label",{htmlFor:"password",children:"Password"}),Object(f.jsx)("input",{onChange:this.handleChange,value:this.state.password,type:"password",id:"password",name:"password"}),Object(f.jsx)("button",{children:"Submit"})]})}}]),n}(r.Component),F=Object(m.g)(v(I)),L=function(e){return Object(f.jsx)(F,{})},N=n(39),B=["component","context"],D=v((function(e){var t=e.component,n=e.context,r=Object(N.a)(e,B);return n.isLoading?null:n.isLoggedIn?Object(f.jsx)(m.b,Object(g.a)(Object(g.a)({},r),{},{render:function(e){return Object(f.jsx)(t,Object(g.a)({},e))}})):Object(f.jsx)(m.a,{to:"/signin"})})),P=function(e){return Object(f.jsx)("div",{children:Object(f.jsx)("h1",{children:"Protected profile"})})},U=n(23),E=n(6),T=n.n(E),_=n(7),G=(n(70),function(e){return Object(f.jsxs)("div",{className:"cardDiv",children:[Object(f.jsx)("img",{src:e.card.images.small,alt:"",height:"400px",width:"350px"}),Object(f.jsx)("div",{children:e.card.name}),e.children]},e.card.id)}),M=n(19),R=function(e){return Object(f.jsxs)("div",{className:"FormField",children:[Object(f.jsx)("label",{htmlFor:e.htmlFor,children:e.label}),e.children]})},H=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).handleNameInputChange=r.handleNameInputChange.bind(Object(M.a)(r)),r}return Object(d.a)(n,[{key:"handleNameInputChange",value:function(e){this.props.handleNameInputChange(e.target.value)}},{key:"render",value:function(){return Object(f.jsx)("div",{className:"SearchBar",children:Object(f.jsxs)("form",{onSubmit:this.props.onSubmit,children:[Object(f.jsx)(R,{children:Object(f.jsx)("input",{type:"text",value:this.props.name,onChange:this.handleNameInputChange,name:"name"})}),Object(f.jsx)("button",{type:"submit",children:"Search"})]})})}}]),n}(r.Component),Y=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={cards:[],loading:!1,page:1,prevY:0,name:""},e.handleNameInputChange=function(){var t=Object(_.a)(T.a.mark((function t(n){var r;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({name:n}),t.next=3,b.filterApiByName(e.state.name).then((function(t){return e.setState({cards:r})}));case 3:r=t.sent;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addCard=function(){var e=Object(_.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.addCard({pokemonTCGId:t});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),e}return Object(d.a)(n,[{key:"getPokemons",value:function(e){var t=this;this.setState({loading:!0}),b.getApiByPage(e).then((function(e){console.log(e),t.setState({cards:[].concat(Object(U.a)(t.state.cards),Object(U.a)(e.data))}),t.setState({loading:!1})})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){this.getPokemons(this.state.page);this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef)}},{key:"handleObserver",value:function(e,t){var n=e[0].boundingClientRect.y;if(this.state.prevY>n){var r=this.state.page+1;this.getPokemons(r),this.setState({page:r})}this.setState({prevY:n})}},{key:"render",value:function(){var e=this,t={display:this.state.loading?"block":"none"};return Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(c.a.Fragment,{children:Object(f.jsx)(H,{name:this.state.name,handleNameInputChange:this.handleNameInputChange})}),Object(f.jsx)("div",{style:{minHeight:"800px",display:"flex",flexWrap:"wrap"},children:this.state.cards.map((function(t){return Object(f.jsx)(G,{card:t,children:Object(f.jsxs)("div",{children:[Object(f.jsx)(i.b,{to:"/cards/"+t.id,children:"Card details"}),Object(f.jsx)("button",{onClick:function(){e.addCard(t.id)},children:"Add Card"})]})})}))}),Object(f.jsx)("div",{ref:function(t){return e.loadingRef=t},style:{height:"100px",margin:"30px"},children:Object(f.jsx)("span",{style:t,children:"Loading..."})})]})}}]),n}(r.Component),W=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.children,t=e.isLoggedIn,n=e.userCards;return Object(f.jsx)("div",{children:Object(f.jsxs)("div",{children:[t&&0===n.length&&Object(f.jsx)("button",{onClick:this.props.addCard,children:"Add to my collection"})," ",t&&n.length>0&&Object(f.jsxs)("div",{children:[Object(f.jsxs)("p",{children:["You have ",n.length," ",1===n.length?"version":"versions"," of this card."]}),Object(f.jsx)("button",{onClick:this.props.addCard,children:"Add another to my collection"})]}),t&&n.map((function(e){return Object(f.jsx)("div",{},e._id)})),t&&Object(f.jsx)("div",{children:"All the current offers : "}),!t&&Object(f.jsx)("div",{children:"See offers"})," "]})})}}]),n}(r.Component),J=(n(71),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={currentBid:0,bidId:"",previousBid:e.props.offer.bid.currentBid,bid:{}},e.handleChange=function(t){var n=t.target.name,r=t.target.value;e.setState(Object(y.a)({},n,r))},e.handleSubmit=function(t){if(console.log("HandleSubmit"),e.state.currentBid<e.state.previousBid)console.log("current bid is too low");else{var n={currentBid:e.state.currentBid};b.updatedBids(t,n),e.setState({bid:n})}},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(_.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.findBid(this.props.offer.bid._id);case 2:t=e.sent,this.setState({bid:t}),console.log("Bid called in oneOffer ",this.state.bid);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:this.props.offer.owner.email}),Object(f.jsx)("td",{children:this.props.offer.cardState}),Object(f.jsxs)("td",{children:[this.props.offer.bid.initialPrice," $"]}),Object(f.jsx)("td",{children:this.state.bid.currentBid?"".concat(this.state.bid.currentBid," $"):"Be the first to Bid"}),Object(f.jsx)("td",{children:this.props.offer.bid.endDate}),Object(f.jsx)("td",{children:Object(f.jsx)("input",{type:"number",name:"currentBid",value:this.state.currentBid,onChange:this.handleChange})}),Object(f.jsx)("td",{children:Object(f.jsx)("button",{onClick:function(){return e.handleSubmit(e.state.bid._id)},children:"Place Bid"})})]},this.state.bid._id)}}]),n}(r.Component)),$=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return console.log(this.props.offers),Object(f.jsx)("div",{children:Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Seller"}),Object(f.jsx)("td",{children:"Card State"}),Object(f.jsx)("td",{children:"Initial Price"}),Object(f.jsx)("td",{children:"Current Bid"}),Object(f.jsx)("td",{children:"End date"}),Object(f.jsx)("td",{children:"Your offer"}),Object(f.jsx)("td",{children:"Confirm"})]})}),Object(f.jsx)("tbody",{children:this.props.offers.map((function(e){return Object(f.jsx)(J,{offer:e})}))})]})})}}]),n}(r.Component),q=(n(34),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{className:"info-container",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{className:"pokemon-name",children:this.props.pokemon.name}),Object(f.jsxs)("div",{className:"pokemon-type",children:[Object(f.jsxs)("h3",{children:[this.props.pokemon.subtypes[0]," ",this.props.pokemon.supertype]}),Object(f.jsxs)("p",{children:["HP",this.props.pokemon.hp,"/"]})]})]}),this.props.abilities&&Object(f.jsxs)("div",{className:"abilities",children:[Object(f.jsx)("h3",{children:this.props.pokemon.abilities.type}),Object(f.jsx)("p",{children:this.props.pokemon.abilities.name}),Object(f.jsx)("p",{children:this.props.pokemon.abilities.text})]}),Object(f.jsxs)("div",{className:"attacks",children:[Object(f.jsxs)("p",{children:[this.props.pokemon.attacks.name," ",Object(f.jsx)("span",{children:this.props.pokemon.attacks.damage})]}),Object(f.jsx)("p",{children:this.props.pokemon.attacks.text})]}),Object(f.jsxs)("div",{className:"pokemon-div-3",children:[Object(f.jsxs)("div",{className:"w-r-rc",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:"Weakness"}),this.props.pokemon.weaknesses&&Object(f.jsxs)("p",{children:[this.props.pokemon.weaknesses.type," x ",this.props.pokemon.weaknesses.value]})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:"Resistance"}),this.props.pokemon.resistances&&Object(f.jsxs)("p",{children:[this.props.pokemon.resistances.type," ",Object(f.jsx)("span",{children:this.props.pokemon.resistances.value})]})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:"Retreat Cost"}),this.props.pokemon.retreatCost&&Object(f.jsxs)("p",{children:[this.props.pokemon.retreatCost[0]," x ",this.props.pokemon.convertedRetreatCost]})]})]}),Object(f.jsxs)("div",{className:"set",children:[Object(f.jsxs)("div",{children:[Object(f.jsxs)("p",{children:[this.props.pokemon.supertype.series," \u2013 ",this.props.pokemon.name]}),Object(f.jsxs)("p",{children:[this.props.pokemon.number,"/",this.props.pokemon.set.total," ",this.props.pokemon.rarity]})]}),Object(f.jsx)("img",{src:this.props.pokemon.set.images.symbol,alt:"symbol set"})]})]}),Object(f.jsx)("div",{children:Object(f.jsxs)("p",{children:["Illustrator : ",this.props.pokemon.artist]})})]})}}]),n}(r.Component)),z=function(e){return Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("img",{src:e.pokemon.images.large,alt:"card"}),Object(f.jsx)(q,{pokemon:e.pokemon})]})},K=n(38),Q=n.n(K),V=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return console.log(this.props),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:this.props.offer.owner.email}),Object(f.jsx)("td",{children:this.props.offer.cardState}),Object(f.jsx)("td",{children:this.props.pokemon.cardmarket.prices.averageSellPrice}),Object(f.jsx)("td",{children:Object(f.jsx)("button",{children:Object(f.jsx)(Q.a,{})})})]},this.props.offer._id)}}]),n}(r.Component),X=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:"All listings open for exchange"}),Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Owner"}),Object(f.jsx)("td",{children:"Card state"}),Object(f.jsx)("td",{children:"Average Sell Price"}),Object(f.jsx)("td",{children:"What do you wanna exchange ?"})]})}),Object(f.jsx)("tbody",{children:this.props.offers.map((function(t){return Object(f.jsx)(V,{offer:t,pokemon:e.props.pokemon})}))})]})]})}}]),n}(r.Component),Z=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={user:{},pokemon:null,isLoggedIn:!1,userCards:[],formDisplayed:!1,cardsOnSale:[],cardsOpenForExchange:[]},e.addCard=Object(_.a)(T.a.mark((function t(){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.addCard({pokemonTCGId:e.props.match.params.id});case 3:return t.next=5,b.getAllUserCardsFromApiCard(e.state.pokemon.id);case 5:n=t.sent,e.setState({userCards:n}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(_.a)(T.a.mark((function e(){var t,n,r,c,a=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.isLoggedIn().then((function(e){a.setState({user:e,isLoggedIn:!0})})).catch((function(e){a.setState({user:null,isLoggedIn:!1})}));case 3:return e.next=5,b.getOneCardFromApi(this.props.match.params.id);case 5:return t=e.sent,this.setState({pokemon:t}),e.next=9,b.getAllUserCardsFromApiCard(this.state.pokemon.id);case 9:return n=e.sent,this.setState({userCards:n}),e.next=13,b.getCardsOnSale(this.state.pokemon.id);case 13:return r=e.sent,this.setState({cardsOnSale:r}),e.next=17,b.getAllCardsOneOfApiIdOpenForExchange(this.state.pokemon.id);case 17:c=e.sent,this.setState({cardsOpenForExchange:c}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),console.error(e.t0);case 24:case"end":return e.stop()}}),e,this,[[0,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return null===this.state.pokemon?Object(f.jsx)("div",{children:"Loading..."}):Object(f.jsxs)("div",{className:"OneCard",children:[Object(f.jsx)(z,{pokemon:this.state.pokemon}),Object(f.jsxs)("div",{children:[Object(f.jsx)(W,{addCard:this.addCard,putCardOnSale:this.putCardOnSale,showForm:this.displaySaleForm,children:this.state}),this.state.cardsOnSale.length>0?Object(f.jsx)($,{offers:this.state.cardsOnSale}):Object(f.jsx)("div",{children:"No vendor is currently selling this card."}),this.state.cardsOpenForExchange.length>0?Object(f.jsx)(X,{offers:this.state.cardsOpenForExchange,pokemon:this.state.pokemon}):Object(f.jsx)("div",{children:"No card is open for exchange for now."})]})]})}}]),n}(r.Component),ee=function(e){return Object(f.jsxs)("div",{className:"cardDiv",children:[Object(f.jsx)(G,{card:e.card.pokemonTCGId,link:"/profile/cards/"+e.card._id}),Object(f.jsxs)("div",{children:[Object(f.jsxs)("p",{children:["Average price: ",e.card.pokemonTCGId.cardmarket.prices.averageSellPrice]}),Object(f.jsx)(i.b,{to:"/cards/"+e.card._id,children:"Bid Details"})]})]},e.card._id)},te=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={cards:[]},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(_.a)(T.a.mark((function e(){var t,n,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.findCardsOnSale();case 2:return t=e.sent,n=t.map((function(e){return b.getOneCardFromApi(e.pokemonTCGId)})),e.next=6,Promise.all(n);case 6:r=e.sent,c=t.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{pokemonTCGId:r[t]})})),this.setState({cards:c});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"ALL THE CARDS ON SALE"}),Object(f.jsx)("div",{children:this.state.cards.map((function(e){return Object(f.jsx)(ee,{card:e})}))})]})}}]),n}(r.Component),ne=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={user:{},card:null,isLoggedIn:!1,initialPrice:0,endDate:"",cardState:""},e.handleChange=function(t){e.setState(Object(y.a)({},t.target.name,t.target.value))},e.createBid=function(){var t=Object(_.a)(T.a.mark((function t(n){var r,c;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r={item:e.props.card._id,initialPrice:e.state.initialPrice,startDate:Date.now(),endDate:e.state.endDate,status:"ongoing"},t.next=4,b.createBid(r);case 4:return c=t.sent,console.log(c),t.next=8,b.updateCard(e.props.card._id,{onSale:!0,price:e.state.initialPrice,bid:c._id,cardState:e.state.cardState});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(_.a)(T.a.mark((function e(){var t,n=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.isLoggedIn().then((function(e){n.setState({user:e,isLoggedIn:!0})})).catch((function(e){n.setState({user:null,isLoggedIn:!1})}));case 3:return e.next=5,b.getOneCard(this.props.card._id);case 5:t=e.sent,this.setState({card:t}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return null===this.state.pokemon?Object(f.jsx)("div",{children:"Loading..."}):Object(f.jsx)("div",{className:"OneCard",children:Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"SaleForm"}),Object(f.jsx)(R,{label:"Select the state of the card you're selling",htmlFor:"cardState",children:Object(f.jsxs)("select",{name:"cardState",onChange:this.handleChange,children:[Object(f.jsx)("option",{value:"Mint",selected:"selected",children:"Mint"}),Object(f.jsx)("option",{value:"Near Mint",children:"Near Mint"}),Object(f.jsx)("option",{value:"Bad",children:"Bad"})]})}),Object(f.jsxs)("p",{children:["Initial Price : ",this.props.card.pokemonTCGId.cardmarket.prices.averageSellPrice]}),Object(f.jsx)(R,{label:"Choose a price",htmlFor:"initialPrice",children:Object(f.jsx)("input",{type:"number",onChange:this.handleChange,value:this.state.initialPrice,name:"initialPrice"})}),Object(f.jsx)(R,{label:"end of the bid",htmlFor:"endDate",children:Object(f.jsx)("input",{type:"datetime-local",onChange:this.handleChange,value:this.state.endTime,name:"endDate"})}),Object(f.jsx)("button",{onClick:this.createBid,children:"Sell"})]})})})}}]),n}(r.Component),re=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={openForExchange:e.props.card.openForExchange},e.handleChange=function(){var e=Object(_.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.handleClick=Object(_.a)(T.a.mark((function t(){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.updateCard(e.props.card._id,{openForExchange:!e.props.card.openForExchange});case 3:console.log(e.props.card),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))),e}return Object(d.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{children:[!this.props.card.openForExchange&&Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:"Not open for exchanges"}),Object(f.jsx)("button",{onClick:this.handleClick,children:"Accept exchanges"})]}),this.props.card.openForExchange&&Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:"Open for exchanges"}),Object(f.jsx)("button",{onClick:this.handleClick,children:"Refuse exchange"})]})]})}}]),n}(r.Component),ce=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={cards:null,searchName:""},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(_.a)(T.a.mark((function e(){var t,n,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getAllUserCards();case 2:return t=e.sent,n=t.map((function(e){return b.getOneCardFromApi(e.pokemonTCGId)})),e.next=6,Promise.all(n);case 6:r=e.sent,c=t.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{pokemonTCGId:r[t]})})),this.setState({cards:c});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return null===this.state.cards?Object(f.jsx)("div",{children:"Loading..."}):Object(f.jsxs)("div",{className:"CardsList",children:[Object(f.jsx)("h2",{children:"ALL USER'S CARDS"}),this.state.cards.map((function(e){return Object(f.jsxs)("div",{children:[Object(f.jsxs)(G,{card:e.pokemonTCGId,link:"/profile/cards/"+e._id,children:[Object(f.jsx)("button",{children:"Sell"}),Object(f.jsx)(re,{card:e})]}),Object(f.jsx)(ne,{card:e})]},e._id)}))]})}}]),n}(r.Component),ae=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).handleAccept=Object(_.a)(T.a.mark((function t(){var n,r;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.auction.item,r={owner:e.props.auction.buyer,onSale:!1,price:null},t.next=4,b.updateCard(n._id,r);case 4:return t.next=6,b.deleteBid(e.props.auction._id);case 6:console.log("bid finished");case 7:case"end":return t.stop()}}),t)}))),e.handleDelete=Object(_.a)(T.a.mark((function t(){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.deleteBid(e.props.auction._id);case 2:console.log("bid deleted");case 3:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(n,[{key:"render",value:function(){return console.log(this.props),Object(f.jsxs)("div",{children:[Object(f.jsx)(G,{card:this.props.auction.pokemonTCGId}),Object(f.jsxs)("div",{children:["Current Offer : ",this.props.auction.currentBid]}),Object(f.jsx)("button",{onClick:this.handleAccept,children:"Accept the offer"}),Object(f.jsx)("button",{onClick:this.handleDelete,children:"Remove card from sale"})]},this.props.auction._id)}}]),n}(r.Component),se=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={auctions:[]},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(_.a)(T.a.mark((function e(){var t,n,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.findUserAuctions();case 2:return t=e.sent,console.log(t),n=t.map((function(e){return b.getOneCardFromApi(e.item.pokemonTCGId)})),e.next=7,Promise.all(n);case 7:r=e.sent,c=t.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{pokemonTCGId:r[t]})})),this.setState({auctions:c});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return console.log(this.state.auctions),Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"User Auctions"}),Object(f.jsx)("div",{children:this.state.auctions.map((function(e){return Object(f.jsx)(ae,{auction:e})}))})]})}}]),n}(r.Component),ie=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={cards:null},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(_.a)(T.a.mark((function e(){var t,n,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getAllCardsOpenForExchange();case 2:return t=e.sent,n=t.map((function(e){return b.getOneCardFromApi(e.pokemonTCGId)})),e.next=6,Promise.all(n);case 6:r=e.sent,c=t.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{pokemonTCGId:r[t]})})),this.setState({cards:c});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return console.log(this.state.cards),null===this.state.cards?Object(f.jsx)("div",{children:"Loading..."}):Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Cards open for exchanges"}),this.state.cards.map((function(e){return Object(f.jsx)(G,{card:e.pokemonTCGId,children:Object(f.jsx)(i.b,{to:"/cards/"+e.pokemonTCGId.id,children:"Card details"})})}))]})}}]),n}(r.Component),oe=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{})}}]),n}(r.Component);var de=function(){return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(k,{}),Object(f.jsxs)(m.d,{children:[Object(f.jsx)(m.b,{exact:!0,path:"/",component:C}),Object(f.jsx)(m.b,{exact:!0,path:"/signin",component:A}),Object(f.jsx)(m.b,{exact:!0,path:"/signup",component:L}),Object(f.jsx)(m.b,{exact:!0,path:"/cards",component:Y}),Object(f.jsx)(m.b,{exact:!0,path:"/cards/:id",component:Z}),Object(f.jsx)(m.b,{exact:!0,path:"/auctions",component:te}),Object(f.jsx)(m.b,{exact:!0,path:"/exchanges",component:ie}),Object(f.jsx)(D,{exact:!0,path:"/profile",component:P}),Object(f.jsx)(D,{path:"/profile/cards",component:ce}),Object(f.jsx)(D,{exact:!0,path:"/profile/cards/:id",component:ne}),Object(f.jsx)(D,{path:"/profile/auctions",component:se}),Object(f.jsx)(D,{path:"/profile/exchanges",component:oe})]})]})};n(72),n(73);s.a.render(Object(f.jsx)(i.a,{children:Object(f.jsx)(x,{children:Object(f.jsx)(de,{})})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.ed94ff10.chunk.js.map