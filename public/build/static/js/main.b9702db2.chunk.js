(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{34:function(e,t,n){},62:function(e,t,n){},68:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(35),s=n.n(c),i=n(9),o=n(3),l=n(4),d=n(6),h=n(5),u=n(36),p=n.n(u).a.create({baseURL:"https://pkmn-shop.herokuapp.com",withCredentials:!0});function j(e){if(e.response.data)throw console.log(e.response&&e.response.data),e;throw e}var b={service:p,signup:function(e){return p.post("/api/auth/signup",e).then((function(e){return e.data})).catch(j)},signin:function(e){return p.post("/api/auth/signin",e).then((function(e){return e.data})).catch(j)},logout:function(){return p.get("/api/auth/logout").then((function(e){return e.data})).catch(j)},isLoggedIn:function(){return p.get("/api/users/profile").then((function(e){return e.data})).catch(j)},getOneCard:function(e){return p.get("/api/me/cards/"+e).then((function(e){return e.data})).catch(j)},getItems:function(){return p.get("/api/pokemonApi/all").then((function(e){return e.data})).catch(j)},getOneCardFromApi:function(e){return p.get("/api/pokemonApi/".concat(e)).then((function(e){return e.data})).catch(j)},getApiByPage:function(e){return p.get("/api/pokemonApi/all/".concat(e)).then((function(e){return e.data})).catch(j)},filterApiByName:function(e,t){return p.get("/api/pokemonApi/search/".concat(e,"/").concat(t)).then((function(e){return e.data})).catch(j)},getAllUserCards:function(){return p.get("/api/me/cards").then((function(e){return e.data})).catch(j)},addCard:function(e){return p.post("/api/me/cards/add",e).then((function(e){return e.data})).catch(j)},updateCard:function(e,t){return p.patch("/api/me/cards/".concat(e,"/edit"),t).then((function(e){return e.data})).catch(j)},getUserCollection:function(e){return p.get("/api/me/collection/".concat(e)).then((function(e){return e.data})).catch(j)},getOneUserCard:function(e){return p.get("/api/me/cards/"+e).then((function(e){return e.data})).catch(j)},createBid:function(e){return p.post("/api/bids/create",e).then((function(e){return e.data})).catch(j)},deleteBid:function(e){return p.delete("/api/bids/".concat(e)).then((function(e){return e.data})).catch(j)},findCardsOnSale:function(){return p.get("/api/bids").then((function(e){return e.data})).catch(j)},findUserAuctions:function(){return p.get("/api/profile/auctions").then((function(e){return e.data})).catch(j)},findAuction:function(e){return p.get("/api/bids/".concat(e)).then((function(e){return e.data})).catch(j)},updatedBids:function(e,t){return p.patch("/api/bids/".concat(e),t).then((function(e){return e.data})).catch(j)},getAllUserCardsFromApiCard:function(e){return p.get("/api/me/cards/all/"+e).then((function(e){return e.data})).catch(j)},getCardsOnSale:function(e){return p.get("/api/cards/bids/"+e).then((function(e){return e.data})).catch(j)},getAllCardsOpenForExchange:function(){return p.get("/api/exchanges").then((function(e){return e.data})).catch(j)},getAllCardsOneOfApiIdOpenForExchange:function(e){return p.get("/api/exchanges/"+e).then((function(e){return e.data})).catch(j)},createExchange:function(e){return p.post("/api//profile/exchanges/create",e).then((function(e){return e.data})).catch(j)},getExchangeOffers:function(){return p.get("/api/profile/exchanges").then((function(e){return e.data})).catch(j)},deleteExchange:function(e){return p.delete("/api/profile/exchanges/".concat(e)).then((function(e){return e.data})).catch(j)},getExchangeBySellerItem:function(e){return p.get("/api/profile/exchanges/".concat(e)).then((function(e){return e.data})).catch(j)}},f=a.a.createContext(),O=n(0),x=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={user:null,isLoggedIn:!1,isLoading:!0},e.setUser=function(t){e.setState({user:t,isLoggedIn:!0})},e.removeUser=function(){e.setState({user:null,isLoggedIn:!1})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;b.isLoggedIn().then((function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1})})).catch((function(t){e.setState({user:null,isLoggedIn:!1,isLoading:!1})}))}},{key:"render",value:function(){var e={user:this.state.user,setUser:this.setUser,removeUser:this.removeUser,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading};return Object(O.jsx)(f.Provider,{value:e,children:this.props.children})}}]),n}(r.Component),m=n(10),g=n(8),v=function(e){return function(t){return Object(O.jsx)(f.Consumer,{children:function(n){return Object(O.jsx)(e,Object(g.a)(Object(g.a)({},t),{},{context:n}))}})}},k=(n(62),v((function(e){var t=e.context;return Object(O.jsxs)("nav",{className:"NavMain navbar",children:[Object(O.jsx)("div",{className:"home-div",children:Object(O.jsx)(i.c,{exact:!0,to:"/",children:Object(O.jsx)("img",{className:"pokeball-logo",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Pok%C3%A9_Ball_icon.svg/1200px-Pok%C3%A9_Ball_icon.svg.png",alt:""})})}),Object(O.jsxs)("ul",{className:"nav-list",children:[t.isLoggedIn&&Object(O.jsxs)(a.a.Fragment,{children:[Object(O.jsx)("li",{children:Object(O.jsx)(i.c,{to:"/cards",className:"NavLink",children:"All Cards"})}),Object(O.jsx)("li",{children:Object(O.jsx)(i.c,{to:"/profile/cards",className:"NavLink",children:"My Cards"})}),Object(O.jsx)("li",{children:Object(O.jsxs)("div",{className:"dropdown",children:[Object(O.jsxs)("button",{className:"dropbtn",children:["Shop",Object(O.jsx)("i",{className:"fa fa-caret-down"})]}),Object(O.jsxs)("div",{className:"dropdown-content",children:[Object(O.jsx)(i.c,{to:"/auctions",className:"NavLink",children:"All Auctions"}),Object(O.jsx)(i.c,{to:"/exchanges",className:"NavLink",children:"All Exchanges"}),Object(O.jsx)(i.c,{to:"/profile/auctions",className:"NavLink",children:"My Auctions"}),Object(O.jsx)(i.c,{to:"/profile/exchanges",className:"NavLink",children:"My Exchanges"})]})]})}),Object(O.jsx)("li",{children:Object(O.jsx)(i.c,{to:"/profile",className:"NavLink",children:t.user&&t.user.email})}),Object(O.jsx)("li",{children:Object(O.jsx)("p",{onClick:function(){b.logout().then((function(){t.removeUser()})).catch((function(e){console.log(e)}))},className:"NavLink",children:"Logout"})})]}),!t.isLoggedIn&&Object(O.jsxs)(a.a.Fragment,{children:[Object(O.jsx)("li",{children:Object(O.jsx)(i.c,{to:"/signin",className:"NavLink",children:"Log in"})}),Object(O.jsx)("li",{children:Object(O.jsx)(i.c,{to:"/signup",className:"NavLink",children:"Create account"})})]})]})]})}))),C=(n(68),v(function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("div",{className:"main-div",children:[Object(O.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Pok%C3%A9mon_Trading_Card_Game_logo.svg/1280px-Pok%C3%A9mon_Trading_Card_Game_logo.svg.png",alt:""}),Object(O.jsx)("div",{className:"template-button",children:Object(O.jsx)(i.b,{to:"/cards",children:"See all cards"})})]})}}]),n}(a.a.Component))),y=n(16),S=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={email:"",password:""},e.handleChange=function(t){var n=t.target.name,r=t.target.value;e.setState(Object(y.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault(),b.signin(e.state).then((function(t){e.props.context.setUser(t)})).catch((function(e){console.log(e)}))},e}return Object(l.a)(n,[{key:"render",value:function(){return this.props.context.user?Object(O.jsx)(m.a,{to:"/"}):Object(O.jsxs)("form",{onChange:this.handleChange,onSubmit:this.handleSubmit,children:[Object(O.jsx)("h2",{children:"Signin"}),Object(O.jsx)("label",{htmlFor:"email",children:"Email"}),Object(O.jsx)("input",{type:"email",id:"email",name:"email"}),Object(O.jsx)("label",{htmlFor:"password",children:"Password"}),Object(O.jsx)("input",{type:"password",id:"password",name:"password"}),Object(O.jsx)("button",{children:"Submit"})]})}}]),n}(r.Component),w=Object(m.g)(v(S)),A=function(e){return Object(O.jsx)(w,{})},I=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={email:"",password:"",username:""},e.handleChange=function(t){var n=t.target.value,r=t.target.name;e.setState(Object(y.a)({},r,n))},e.handleSubmit=function(t){t.preventDefault(),b.signup(e.state).then((function(){e.props.history.push("/signin")})).catch((function(e){console.log(e)}))},e}return Object(l.a)(n,[{key:"render",value:function(){return this.props.context.user?Object(O.jsx)(m.a,{to:"/"}):Object(O.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(O.jsx)("h2",{children:"Signup"}),Object(O.jsx)("label",{htmlFor:"username",children:"Username"}),Object(O.jsx)("input",{onChange:this.handleChange,value:this.state.username,type:"username",id:"username",name:"username"}),Object(O.jsx)("label",{htmlFor:"email",children:"Email"}),Object(O.jsx)("input",{onChange:this.handleChange,value:this.state.email,type:"email",id:"email",name:"email"}),Object(O.jsx)("label",{htmlFor:"password",children:"Password"}),Object(O.jsx)("input",{onChange:this.handleChange,value:this.state.password,type:"password",id:"password",name:"password"}),Object(O.jsx)("button",{children:"Submit"})]})}}]),n}(r.Component),N=Object(m.g)(v(I)),B=function(e){return Object(O.jsx)(N,{})},F=n(38),L=["component","context"],_=v((function(e){var t=e.component,n=e.context,r=Object(F.a)(e,L);return n.isLoading?null:n.isLoggedIn?Object(O.jsx)(m.b,Object(g.a)(Object(g.a)({},r),{},{render:function(e){return Object(O.jsx)(t,Object(g.a)({},e))}})):Object(O.jsx)(m.a,{to:"/signin"})})),E=function(e){return Object(O.jsx)("div",{children:Object(O.jsx)("h1",{children:"Protected profile"})})},P=n(2),D=n.n(P),T=n(7),G=n(18),U=(n(70),function(e){return Object(O.jsxs)("div",{className:"cardDiv",children:[Object(O.jsx)("img",{src:e.card.images.small,alt:"",height:"400px",width:"350px"}),Object(O.jsx)("h2",{children:e.card.name}),Object(O.jsx)("div",{children:e.children})]},e.key)}),M=n(19),R=function(e){return Object(O.jsxs)("div",{className:"FormField",children:[Object(O.jsx)("label",{htmlFor:e.htmlFor,children:e.label}),e.children]})},Y=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).handleChange=function(e){r.props.handleChange(e.target.value)},r.handleClick=function(){r.props.handleClick()},r.handleReset=function(){r.props.handleReset()},r.handleChange=r.handleChange.bind(Object(M.a)(r)),r.handleClick=r.handleClick.bind(Object(M.a)(r)),r.handleReset=r.handleReset.bind(Object(M.a)(r)),r}return Object(l.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("div",{className:"SearchBar",children:[Object(O.jsx)(R,{children:Object(O.jsx)("input",{type:"text",value:this.props.name,onChange:this.handleChange})}),Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{onClick:this.handleClick,children:"Search"}),Object(O.jsx)("button",{onClick:this.handleReset,children:"Reset search"})]})]})}}]),n}(r.Component),H=function(){return Object(O.jsx)("div",{children:Object(O.jsx)("p",{children:"Wait a bit... we need to catch 'em all ! "})})},W=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={cards:[],loading:!1,loadingItems:!1,page:1,prevY:0,name:""},e.getPokemonsByName=function(t,n){e.setState({loading:!0,page:1,prevY:0}),b.filterApiByName(t,n).then((function(t){e.setState({cards:[].concat(Object(G.a)(e.state.cards),Object(G.a)(t.data))}),e.setState({loading:!1})})).catch((function(e){return console.log(e)}))},e.handleChange=function(t){e.setState({name:t})},e.handleClick=function(){e.setState({loading:!0,page:1,prevY:0,cards:[]}),e.getPokemonsByName(e.state.name,e.state.page)},e.handleReset=function(){e.getAllPokemons(e.state.page),console.log(e.state.cards.length)},e.addCard=function(){var e=Object(T.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.addCard({pokemonTCGId:t});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),e.resetState=function(){e.setState({loading:!0,page:1,prevY:0,cards:[]})},e}return Object(l.a)(n,[{key:"getAllPokemons",value:function(e){var t=this;this.resetState(),b.getApiByPage(e).then((function(e){t.setState({cards:[].concat(Object(G.a)(t.state.cards),Object(G.a)(e.data))}),t.setState({loading:!1})})).catch((function(e){console.log(e)}));this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef)}},{key:"handleObserver",value:function(e,t){var n=e[0].boundingClientRect.y;if(this.state.prevY>n){var r=this.state.page+1;""!==this.state.name?this.getPokemonsByName(this.state.name,r):this.getAllPokemons(r),this.setState({page:r})}this.setState({prevY:n})}},{key:"componentDidMount",value:function(){this.getAllPokemons(this.state.page)}},{key:"render",value:function(){var e=this,t={display:this.state.loadingItems?"block":"none"};return Object(O.jsxs)("div",{className:"container",children:[Object(O.jsxs)("div",{className:"search-div",children:[Object(O.jsx)("h1",{children:"Search for a Pokemon ! "}),Object(O.jsx)(Y,{name:this.state.name,handleChange:this.handleChange,handleClick:this.handleClick,handleReset:this.handleReset})]}),this.state.loading&&Object(O.jsx)(H,{}),Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{style:{minHeight:"800px",display:"flex",flexWrap:"wrap"},children:this.state.cards.map((function(t){return Object(O.jsx)(U,{card:t,children:Object(O.jsxs)("div",{children:[Object(O.jsx)(i.b,{to:"/cards/"+t.id,className:"template-button-all-cards",children:"Card details"}),Object(O.jsx)("button",{onClick:function(){e.addCard(t.id)},className:"template-button-all-cards",children:"Add Card"})]})})}))}),Object(O.jsx)("div",{ref:function(t){return e.loadingRef=t},style:{height:"100px",margin:"30px"},children:this.state.cards.length>0&&Object(O.jsx)(H,{style:t})})]})]})}}]),n}(r.Component),J=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).handleAdd=function(){e.props.getUserCardsFromModel()},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.children,t=e.isLoggedIn,n=e.userCards;return Object(O.jsx)("div",{children:Object(O.jsxs)("div",{children:[t&&0===n.length&&Object(O.jsx)("button",{onClick:this.props.addCard,children:"Add to my collection"})," ",t&&n.length>0&&Object(O.jsxs)("div",{children:[Object(O.jsxs)("p",{children:["You have ",n.length," ",1===n.length?"version":"versions"," of this card."]}),Object(O.jsx)("button",{onClick:this.props.addCard,className:"template-button-all-cards",children:"Add another to my collection"})]}),t&&n.map((function(e){return Object(O.jsx)("div",{},e._id)})),t&&Object(O.jsx)("h2",{children:"All the current offers : "}),!t&&Object(O.jsx)("div",{children:"See offers"})," "]})})}}]),n}(r.Component),$=(n(71),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var r,a;return Object(o.a)(this,n),(a=t.call(this,e)).getCurrentAuction=function(){var e=Object(T.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.findAuction(t).then((function(e){a.setState({auction:e})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(y.a)({},t,n))},a.handleBid=function(){a.props.onBid()},a.handleSubmit=function(e){if(a.state.currentBid<a.state.previousBid)console.log("current bid is too low");else{var t={currentBid:a.state.currentBid};b.updatedBids(e,t),a.setState({auction:t}),a.handleBid(),a.setState({bidPlaced:!0}),a.displayCurrentBid()}},a.finalFunction=function(){var e=Object(T.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.handleSubmit(t);case 3:return e.next=5,a.handleBid();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),a.displayCurrentBid=function(){a.props.offer.bid.buyer===a.state.userId&&a.setState({hasHighestBid:!0})},a.state={currentBid:0,previousBid:(null===(r=a.props.offer.bid)||void 0===r?void 0:r.currentBid)||0,auction:{},bidPlaced:!1,hasHighestBid:!1,userId:""},a.timer=null,a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(T.a)(D.a.mark((function e(){var t,n=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.isLoggedIn().then((function(e){n.setState({userId:e._id})}));case 2:return e.next=4,b.findAuction(this.props.offer.bid._id);case 4:t=e.sent,this.setState({auction:t}),this.displayCurrentBid();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(T.a)(D.a.mark((function e(){var t=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.timer=setTimeout((function(){t.getCurrentAuction(t.props.offer.bid._id)}),5e3);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(T.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:clearTimeout(this.timer);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return console.log(this.props),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:this.props.offer.owner.email}),Object(O.jsx)("td",{children:this.props.offer.cardState}),Object(O.jsxs)("td",{children:[this.props.offer.bid.initialPrice," $"]}),Object(O.jsx)("td",{children:this.state.auction.currentBid?"".concat(this.state.auction.currentBid," $"):"Be the first to Bid"}),Object(O.jsx)("td",{children:this.props.offer.bid.endDate}),Object(O.jsxs)("td",{children:[this.state.hasHighestBid&&Object(O.jsx)("div",{children:Object(O.jsx)("p",{children:"You're in the lead !"})}),!this.state.hasHighestBid&&Object(O.jsx)("input",{type:"number",name:"currentBid",value:this.state.currentBid,onChange:this.handleChange})]}),Object(O.jsx)("td",{children:!this.state.hasHighestBid&&Object(O.jsx)("button",{onClick:function(){return e.handleSubmit(e.state.auction._id)},children:"Place Bid"})})]},this.state.auction._id)}}]),n}(r.Component)),z=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return console.log(this.props),Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{children:"All the auctions"}),Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:"Seller"}),Object(O.jsx)("td",{children:"Card State"}),Object(O.jsx)("td",{children:"Initial Price"}),Object(O.jsx)("td",{children:"Current Bid"}),Object(O.jsx)("td",{children:"End date"}),Object(O.jsx)("td",{children:"Your offer"}),Object(O.jsx)("td",{children:"Confirm"})]})}),Object(O.jsx)("tbody",{children:this.props.auctions.map((function(t){return Object(O.jsx)($,{offer:t,onBid:e.props.onBid})}))})]})]})}}]),n}(r.Component),q=(n(34),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("div",{className:"info-container",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{className:"pokemon-name",children:this.props.pokemon.name}),Object(O.jsxs)("div",{className:"pokemon-type",children:[Object(O.jsxs)("h3",{children:[this.props.pokemon.subtypes[0]," ",this.props.pokemon.supertype]}),Object(O.jsxs)("p",{children:["Health : ",this.props.pokemon.hp," HP"]})]})]}),Object(O.jsxs)("div",{className:"attacks",children:[Object(O.jsx)("h2",{children:"Attacks : "}),this.props.pokemon.attacks.map((function(e){return Object(O.jsxs)("div",{children:[Object(O.jsxs)("p",{children:[Object(O.jsx)("b",{children:e.name}),Object(O.jsxs)("span",{children:[" ",e.damage," "]})]}),Object(O.jsxs)("p",{children:[Object(O.jsx)("b",{children:"Description : "}),e.text]})]})}))]}),Object(O.jsxs)("div",{className:"pokemon-div-3",children:[Object(O.jsxs)("div",{className:"w-r-rc",children:[Object(O.jsx)("h2",{children:"Weaknesses : "}),Object(O.jsx)("div",{children:this.props.pokemon.weaknesses&&this.props.pokemon.weaknesses.map((function(e){return Object(O.jsx)("div",{children:Object(O.jsxs)("p",{children:[Object(O.jsxs)("b",{children:[e.type," :"]})," ",e.value]})})}))}),Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Resistances : "}),this.props.pokemon.resistances&&this.props.pokemon.resistances.map((function(e){return Object(O.jsx)("div",{children:Object(O.jsxs)("p",{children:[" ",Object(O.jsxs)("b",{children:[e.type," :"]})," ",e.value]})})})),this.props.pokemon.resistances&&Object(O.jsxs)("p",{children:[this.props.pokemon.resistances.type," ",Object(O.jsx)("span",{children:this.props.pokemon.resistances.value})]})]})]}),Object(O.jsxs)("div",{className:"set",children:[Object(O.jsx)("h2",{children:"Set :"}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("p",{children:[Object(O.jsx)("b",{children:this.props.pokemon.set.name})," \u2013 ",this.props.pokemon.name]}),Object(O.jsxs)("p",{children:[Object(O.jsx)("b",{children:"Rarity : "}),this.props.pokemon.number,"/",this.props.pokemon.set.total," ",this.props.pokemon.rarity]})]}),Object(O.jsxs)("p",{children:[Object(O.jsx)("b",{children:"Set Symbol :"})," "]}),Object(O.jsx)("img",{src:this.props.pokemon.set.images.symbol,alt:"symbol set"})]})]}),Object(O.jsx)("div",{children:Object(O.jsxs)("p",{children:[" ",Object(O.jsx)("b",{children:"Illustrator :"})," ",this.props.pokemon.artist]})})]})}}]),n}(r.Component)),K=(n(72),function(e){return Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("div",{children:Object(O.jsx)("img",{src:e.pokemon.images.large,alt:"card"})}),Object(O.jsx)(q,{pokemon:e.pokemon,className:"card-info-div"})]})}),Q=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).handleChange=function(t){e.props.handleChange(t)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(O.jsx)("div",{children:this.props.cards.map((function(t){return Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{type:"checkbox",id:t._id,onChange:e.props.handleChange}),Object(O.jsxs)("label",{htmlFor:"items",children:[t.pokemonTCGId.name," \u2013 ",t._id]})]},t._id)}))})}}]),n}(r.Component),V=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={callBox:!1,loading:!1,cards:[],exchangeItems:[],loadingItems:!0,exchangeExists:!1},e.addCard=function(t){var n=e.state.exchangeItems;n.push(t),e.setState({exchangeItems:n})},e.deleteCard=function(t){var n=Object(G.a)(e.state.exchangeItems).filter((function(e){return e!==t}));e.setState({exchangeItems:n})},e.handleChange=function(t){t.target.checked?e.addCard(t.target.id):e.deleteCard(t.target.id)},e.handleSubmit=Object(T.a)(D.a.mark((function t(){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={seller:e.props.listing.owner._id,sellerItem:e.props.listing._id,buyerItem:e.state.exchangeItems},t.prev=1,t.next=4,b.createExchange(n);case 4:e.setState({callBox:!1}),e.getTheExchange(e.props.listing._id),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.getAllUserCards=Object(T.a)(D.a.mark((function t(){var n,r,a,c;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.getAllUserCards();case 2:return n=t.sent,r=n.map((function(e){return b.getOneCardFromApi(e.pokemonTCGId)})),t.next=6,Promise.all(r);case 6:a=t.sent,c=n.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{pokemonTCGId:a[t]})})),e.setState({cards:c,loadingItems:!1});case 9:case"end":return t.stop()}}),t)}))),e.handleClick=function(){e.setState({loadingItems:!0,callBox:!0}),e.getAllUserCards()},e.getTheExchange=function(){var t=Object(T.a)(D.a.mark((function t(n){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.getExchangeBySellerItem(n).then((function(t){t.length>0?e.setState({exchangeExists:!0}):e.setState({exchangeExists:!1})})).catch((function(t){console.log(t),e.setState({exchangeExists:!1})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(T.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!1}),this.getTheExchange(this.props.listing._id);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:this.props.listing.owner.email}),Object(O.jsxs)("td",{children:[!this.props.listing.cardState&&Object(O.jsx)("p",{children:"N/D"}),this.props.listing.cardState&&this.props.listing.cardState]}),Object(O.jsxs)("td",{children:[Object(O.jsx)("button",{onClick:this.handleClick,children:"Select cards"}),Object(O.jsxs)("div",{children:[this.state.callBox&&this.state.loadingItems&&Object(O.jsx)("div",{children:Object(O.jsx)("p",{children:"Catching all your pokemons... plz hooold"})}),this.state.callBox&&Object(O.jsx)(Q,{getUserCards:this.getUserCards,cards:this.state.cards,exchangeItems:this.state.exchangeItems,handleChange:this.handleChange}),this.state.callBox&&0===this.state.cards.length&&Object(O.jsx)("div",{children:"You have no cards to exchange !"})]})]}),Object(O.jsx)("td",{children:Object(O.jsx)("ul",{children:this.state.exchangeItems.map((function(e){return Object(O.jsx)("li",{children:e})}))})}),Object(O.jsxs)("td",{children:[!this.state.exchangeExists&&Object(O.jsx)("button",{onClick:this.handleSubmit,children:"Confirm offer"}),this.state.exchangeExists&&Object(O.jsx)("p",{children:"Here is your offer"})]})]},this.props.listing._id)}}]),n}(r.Component),X=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{children:"All listings open for exchange"}),Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:"Owner"}),Object(O.jsx)("td",{children:"Card state"}),Object(O.jsx)("td",{children:"What do you wanna exchange ?"}),Object(O.jsx)("td",{children:"Your current offer"}),Object(O.jsx)("td",{children:"Confirm offer"})]})}),Object(O.jsx)("tbody",{children:this.props.offers.map((function(t){return Object(O.jsx)(V,{listing:t,pokemon:e.props.pokemon})}))})]})]})}}]),n}(r.Component),Z=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={user:{},pokemon:null,isLoggedIn:!1,userCards:[],formDisplayed:!1,cardsOnSale:[],cardsOpenForExchange:[]},e.getUserCardsFromModel=function(){var t=Object(T.a)(D.a.mark((function t(n){var r;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.getAllUserCardsFromApiCard(n);case 3:r=t.sent,e.setState({userCards:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.addCard=Object(T.a)(D.a.mark((function t(){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.addCard({pokemonTCGId:e.props.match.params.id});case 3:return t.next=5,b.getAllUserCardsFromApiCard(e.state.pokemon.id);case 5:n=t.sent,e.setState({userCards:n}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),e.handleBid=function(){var t=Object(T.a)(D.a.mark((function t(n){var r;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.getCardsOnSale(e.state.pokemon.id);case 3:r=t.sent,e.setState({cardsOnSale:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(T.a)(D.a.mark((function e(){var t,n,r,a=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.isLoggedIn().then((function(e){a.setState({user:e,isLoggedIn:!0})})).catch((function(e){a.setState({user:null,isLoggedIn:!1})}));case 3:return e.next=5,b.getOneCardFromApi(this.props.match.params.id);case 5:return t=e.sent,this.setState({pokemon:t}),this.getUserCardsFromModel(this.state.pokemon.id),e.next=10,b.getCardsOnSale(this.state.pokemon.id);case 10:return n=e.sent,this.setState({cardsOnSale:n}),e.next=14,b.getAllCardsOneOfApiIdOpenForExchange(this.state.pokemon.id);case 14:r=e.sent,this.setState({cardsOpenForExchange:r}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error(e.t0);case 21:case"end":return e.stop()}}),e,this,[[0,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return console.log(this.state),null===this.state.pokemon?Object(O.jsx)(H,{}):Object(O.jsxs)("div",{className:"OneCard",children:[Object(O.jsx)(K,{pokemon:this.state.pokemon}),Object(O.jsx)(J,{addCard:this.addCard,putCardOnSale:this.putCardOnSale,showForm:this.displaySaleForm,children:this.state}),Object(O.jsxs)("section",{className:"shop-section",children:[Object(O.jsx)("h1",{children:"Shop Section"}),this.state.cardsOnSale.length>0?Object(O.jsx)(z,{auctions:this.state.cardsOnSale,onBid:this.handleBid}):Object(O.jsx)("div",{children:"No vendor is currently selling this card."}),this.state.cardsOpenForExchange.length>0?Object(O.jsx)(X,{offers:this.state.cardsOpenForExchange,pokemon:this.state.pokemon}):Object(O.jsx)("div",{children:"No card is open for exchange for now."})]})]})}}]),n}(r.Component),ee=function(e){return Object(O.jsxs)("div",{className:"cardDiv",children:[Object(O.jsx)(U,{card:e.card.pokemonTCGId,link:"/profile/cards/"+e.card._id}),Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:Object(O.jsxs)("b",{children:["Average price: ",e.card.pokemonTCGId.cardmarket.prices.averageSellPrice]})}),Object(O.jsx)(i.b,{to:"/cards/"+e.card.pokemonTCGId.id,className:"template-button-all-cards",children:"Bid Details"})]})]},e.card._id)},te=(n(73),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={cards:[]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(T.a)(D.a.mark((function e(){var t,n,r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.findCardsOnSale();case 2:return t=e.sent,n=t.map((function(e){return b.getOneCardFromApi(e.pokemonTCGId)})),e.next=6,Promise.all(n);case 6:r=e.sent,a=t.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{pokemonTCGId:r[t]})})),this.setState({cards:a});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"Cards on Sale : "}),Object(O.jsx)("div",{className:"auctions-div",children:this.state.cards.map((function(e){return Object(O.jsx)(ee,{card:e})}))})]})}}]),n}(r.Component)),ne=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={user:{},card:null,isLoggedIn:!1,initialPrice:0,endDate:"",cardState:""},e.handleChange=function(t){e.setState(Object(y.a)({},t.target.name,t.target.value))},e.createBid=function(){var t=Object(T.a)(D.a.mark((function t(n){var r,a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r={item:e.props.card._id,initialPrice:e.state.initialPrice,startDate:Date.now(),endDate:e.state.endDate,status:"ongoing"},t.next=4,b.createBid(r);case 4:return a=t.sent,console.log(a),t.next=8,b.updateCard(e.props.card._id,{onSale:!0,price:e.state.initialPrice,bid:a._id,cardState:e.state.cardState});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(T.a)(D.a.mark((function e(){var t,n=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.isLoggedIn().then((function(e){n.setState({user:e,isLoggedIn:!0})})).catch((function(e){n.setState({user:null,isLoggedIn:!1})}));case 3:return e.next=5,b.getOneCard(this.props.card._id);case 5:t=e.sent,this.setState({card:t}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return null===this.state.pokemon?Object(O.jsx)("div",{children:"Loading..."}):Object(O.jsx)("div",{className:"OneCard",children:Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"SaleForm"}),Object(O.jsx)(R,{label:"Select the state of the card you're selling",htmlFor:"cardState",children:Object(O.jsxs)("select",{name:"cardState",onChange:this.handleChange,children:[Object(O.jsx)("option",{disabled:!0,children:"Select"}),Object(O.jsx)("option",{value:"Mint",children:"Mint"}),Object(O.jsx)("option",{value:"Near Mint",children:"Near Mint"}),Object(O.jsx)("option",{value:"Bad",children:"Bad"})]})}),Object(O.jsxs)("p",{children:["Initial Price : ",this.props.card.pokemonTCGId.cardmarket.prices.averageSellPrice]}),Object(O.jsx)(R,{label:"Choose a price",htmlFor:"initialPrice",children:Object(O.jsx)("input",{type:"number",onChange:this.handleChange,value:this.state.initialPrice,name:"initialPrice"})}),Object(O.jsx)(R,{label:"end of the bid",htmlFor:"endDate",children:Object(O.jsx)("input",{type:"datetime-local",onChange:this.handleChange,value:this.state.endTime,name:"endDate"})}),Object(O.jsx)("button",{onClick:this.createBid,children:"Sell"})]})})})}}]),n}(r.Component),re=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={openForExchange:e.props.card.openForExchange},e.handleClick=Object(T.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.updateCard(e.props.card._id,{openForExchange:!e.props.card.openForExchange});case 3:e.props.update(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))),e}return Object(l.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("div",{children:[!this.props.card.openForExchange&&Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{children:"Not open for exchanges"}),Object(O.jsx)("button",{onClick:this.handleClick,children:"Accept exchanges"})]}),this.props.card.openForExchange&&Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{children:"Open for exchanges"}),Object(O.jsx)("button",{onClick:this.handleClick,children:"Refuse exchange"})]})]})}}]),n}(r.Component),ae=(n(74),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={cards:null,searchName:""},e.getAllCards=Object(T.a)(D.a.mark((function e(){var t,n,r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.getAllUserCards();case 3:return t=e.sent,n=t.map((function(e){return b.getOneCardFromApi(e.pokemonTCGId)})),e.next=7,Promise.all(n);case 7:return r=e.sent,a=t.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{pokemonTCGId:r[t]})})),e.abrupt("return",a);case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),e.updateStatus=function(){e.getAllCards()},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(T.a)(D.a.mark((function e(){var t=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getAllCards().then((function(e){t.setState({cards:e})})).catch((function(e){return console.error(e)}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return null===this.state.cards?Object(O.jsx)(H,{}):Object(O.jsxs)("div",{className:"CardsList",children:[Object(O.jsx)("h2",{children:"ALL USER'S CARDS"}),this.state.cards.map((function(t){return Object(O.jsxs)("div",{children:[Object(O.jsx)(U,{card:t.pokemonTCGId,link:"/profile/cards/"+t._id,children:Object(O.jsx)(re,{card:t,update:e.updateStatus})}),Object(O.jsx)(ne,{card:t})]},t._id)}))]})}}]),n}(r.Component)),ce=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).handleAccept=Object(T.a)(D.a.mark((function t(){var n,r;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.auction.item,r={owner:e.props.auction.buyer,onSale:!1,price:null},t.next=4,b.updateCard(n._id,r);case 4:return t.next=6,b.deleteBid(e.props.auction._id);case 6:console.log("bid finished");case 7:case"end":return t.stop()}}),t)}))),e.handleDelete=Object(T.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.deleteBid(e.props.auction._id);case 2:console.log("bid deleted");case 3:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"render",value:function(){return console.log(this.props),Object(O.jsxs)("div",{children:[Object(O.jsx)(U,{card:this.props.auction.pokemonTCGId}),Object(O.jsxs)("div",{children:["Current Offer : ",this.props.auction.currentBid]}),Object(O.jsx)("button",{onClick:this.handleAccept,children:"Accept the offer"}),Object(O.jsx)("button",{onClick:this.handleDelete,children:"Remove card from sale"})]},this.props.auction._id)}}]),n}(r.Component),se=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={auctions:[]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(T.a)(D.a.mark((function e(){var t,n,r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.findUserAuctions();case 2:return t=e.sent,n=t.map((function(e){return b.getOneCardFromApi(e.item.pokemonTCGId)})),e.next=6,Promise.all(n);case 6:r=e.sent,a=t.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{pokemonTCGId:r[t]})})),this.setState({auctions:a});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"User Auctions"}),Object(O.jsx)("div",{children:this.state.auctions.map((function(e){return Object(O.jsx)(ce,{auction:e})}))})]})}}]),n}(r.Component),ie=(n(75),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={cards:null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(T.a)(D.a.mark((function e(){var t,n,r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getAllCardsOpenForExchange();case 2:return t=e.sent,n=t.map((function(e){return b.getOneCardFromApi(e.pokemonTCGId)})),e.next=6,Promise.all(n);case 6:r=e.sent,a=t.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{pokemonTCGId:r[t]})})),this.setState({cards:a});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return console.log(this.state.cards),null===this.state.cards?Object(O.jsx)("div",{children:"Loading..."}):Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Cards open for exchanges"}),Object(O.jsx)("div",{className:"exchange-div",children:this.state.cards.map((function(e){return Object(O.jsx)(U,{card:e.pokemonTCGId,children:Object(O.jsx)(i.b,{to:"/cards/"+e.pokemonTCGId.id,className:"template-button-all-cards",children:"Card details"})},e._id)}))})]})}}]),n}(r.Component)),oe=function(e){return Object(O.jsx)("div",{children:e.children})},le=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={loading:!0,items:null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(T.a)(D.a.mark((function e(){var t,n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props.items.map((function(e){return b.getOneCardFromApi(e.pokemonTCGId)})),e.next=4,Promise.all(t);case 4:n=e.sent,r=this.props.items.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{pokemonTCGId:n[t]})})),this.setState({items:r,loading:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return!0===this.state.loading?Object(O.jsx)(H,{}):Object(O.jsx)("div",{children:Object(O.jsx)("ul",{children:this.state.items.map((function(e){return Object(O.jsx)("li",{children:Object(O.jsxs)("div",{children:[Object(O.jsx)("img",{src:e.pokemonTCGId.images.small,alt:"photo "+e.pokemonTCGId.name}),Object(O.jsx)("p",{children:e.pokemonTCGId.name}),Object(O.jsxs)("p",{children:["Average sell price : ",e.pokemonTCGId.cardmarket.prices.averageSellPrice]})]})},e._id+3)}))})})}}]),n}(r.Component),de=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).handleAccept=function(t){e.props.handleAccept(t)},e.handleDecline=function(t){e.props.handleDecline(t)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{children:[Object(O.jsx)(U,{card:this.props.exchange.pokemonTCGId}),Object(O.jsx)("div",{children:Object(O.jsxs)("p",{children:["Initial price of my card : ",this.props.exchange.pokemonTCGId.cardmarket.prices.averageSellPrice]})}),Object(O.jsx)(le,{items:this.props.exchange.buyerItem}),Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{onClick:function(){e.handleAccept(e.props.exchange)},children:"Accept Offer"}),Object(O.jsx)("button",{onClick:function(){e.handleDecline(e.props.exchange)},children:"Decline Offer"})]})]},this.props.exchange.sellerItem._id+1)}}]),n}(a.a.Component),he=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={exchanges:null,loading:!0},e.getAllExchangeOffers=Object(T.a)(D.a.mark((function t(){var n,r,a,c;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.getExchangeOffers();case 3:return n=t.sent,r=n.map((function(e){return b.getOneCardFromApi(e.sellerItem.pokemonTCGId)})),t.next=7,Promise.all(r);case 7:a=t.sent,c=n.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{pokemonTCGId:a[t]})})),e.setState({exchanges:c}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])}))),e.handleAccept=function(){var t=Object(T.a)(D.a.mark((function t(n){var r,a,c,s;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={owner:n.buyer,openForExchange:!1},t.next=4,b.updateCard(n.sellerItem._id,r);case 4:return a=t.sent,console.log(a),c={owner:n.seller,openForExchange:!1},s=n.buyerItem.map((function(e){return b.updateCard(e._id,c)})),t.next=10,Promise.all(s);case 10:return t.next=12,b.deleteExchange(n._id);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.error(t.t0);case 17:e.handleClick();case 19:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),e.handleDecline=function(){var t=Object(T.a)(D.a.mark((function t(n){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.deleteExchange(n._id);case 2:e.handleClick();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleClick=function(){e.getAllExchangeOffers()},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(T.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getAllExchangeOffers(),this.setState({loading:!1});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return null===this.state.exchanges?Object(O.jsx)(H,{}):0===this.state.exchanges.length?Object(O.jsx)(oe,{children:"You don't have offers for exchanges yet..."}):Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Offers for exchange"}),!this.state.loading&&Object(O.jsx)("div",{children:this.state.exchanges.map((function(t){return Object(O.jsx)(de,{exchange:t,handleDecline:e.handleDecline,handleAccept:e.handleAccept})}))})]})}}]),n}(r.Component);var ue=function(){return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(k,{}),Object(O.jsxs)(m.d,{children:[Object(O.jsx)(m.b,{exact:!0,path:"/",component:C}),Object(O.jsx)(m.b,{exact:!0,path:"/signin",component:A}),Object(O.jsx)(m.b,{exact:!0,path:"/signup",component:B}),Object(O.jsx)(m.b,{exact:!0,path:"/cards",component:W}),Object(O.jsx)(m.b,{exact:!0,path:"/cards/:id",component:Z}),Object(O.jsx)(m.b,{exact:!0,path:"/auctions",component:te}),Object(O.jsx)(m.b,{exact:!0,path:"/exchanges",component:ie}),Object(O.jsx)(_,{exact:!0,path:"/profile",component:E}),Object(O.jsx)(_,{path:"/profile/cards",component:ae}),Object(O.jsx)(_,{exact:!0,path:"/profile/cards/:id",component:ne}),Object(O.jsx)(_,{path:"/profile/auctions",component:se}),Object(O.jsx)(_,{path:"/profile/exchanges",component:he})]})]})};n(76),n(77);s.a.render(Object(O.jsx)(i.a,{children:Object(O.jsx)(x,{children:Object(O.jsx)(ue,{})})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.b9702db2.chunk.js.map